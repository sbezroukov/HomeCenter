# Формат файлов тестов QuizApp

Инструкция для формирования txt-файлов с тестами: типы, структура папок, синтаксис.

---

## Где лежат тесты

- **Папка:** `tests/` в корне проекта (относительно приложения).
- **Расширение:** только `.txt`.
- **Подпапки:** поддерживаются. Структура папок отображается в приложении как категории (например: `tests/География/Урок 5/тест.txt` → категория «География», подкатегория «Урок 5»).

Имя файла (без расширения) используется как **название темы** в интерфейсе. Для отображения пути используется полный путь от `tests/` (например: «География / Урок 5 / тест»).

---

## Типы тестов (MODE)

В **первой непустой строке** файла указывается тип теста: `MODE: <тип>`.

| Тип в файле   | Назначение | Проверка ответов |
|---------------|------------|-------------------|
| **Test**      | Тест с вариантами ответа | Один правильный вариант помечается `*`, результат в процентах. |
| **Open**      | Открытые вопросы | Ответ вводится текстом, автоматической оценки нет. |
| **Self** / **SelfStudy** | Самопроверка | Вопросы показываются без ввода ответа, оценки нет. |

Допустимые значения после `MODE:` (регистр не важен): `Test`, `Open`, `Self`, `SelfStudy`. Если строка `MODE:` отсутствует или значение неизвестно, по умолчанию используется **Test**.

---

## Общая структура файла

1. Первая непустая строка: `MODE: Test` или `MODE: Open` или `MODE: Self` (или `SelfStudy`).
2. Дальше идут блоки вопросов.
3. Каждый вопрос начинается со строки `Q:` (или `q:`); после двоеточия — текст вопроса.
4. Блоки разделяются **пустой строкой** (одна или несколько пустых строк между вопросами).
5. Строки, не начинающиеся с `Q:` и не являющиеся вариантами ответа (в режиме Test), пропускаются до следующего `Q:` или конца файла.

Кодировка файла — UTF-8 (для кириллицы и спецсимволов).

---

## Формат по типам

### MODE: Test (тест с вариантами)

- Сразу после строки с вопросом (`Q: ...`) перечисляются варианты ответа.
- Каждый вариант — отдельная строка.
- **Правильный вариант** помечается **звёздочкой в начале строки** — `*` перед текстом варианта.
- Должен быть ровно один правильный вариант на вопрос (логика приложения ориентирована на один правильный ответ).
- Варианты заканчиваются при первой пустой строке или при следующей строке `Q:`.

Пример:

```text
MODE: Test

Q: Сколько будет 2+2?
1) 3
*2) 4
3) 5

Q: Столица Франции?
1) Берлин
2) Мадрид
*3) Париж
```

Нумерация (`1)`, `2)` и т.д.) не обязательна для парсера — важно только наличие `*` у правильного варианта.

### MODE: Open (открытые вопросы)

- После `Q: <текст вопроса>` не нужны варианты.
- Следующий блок — либо пустая строка, либо следующий вопрос `Q: ...`.
- Ответ пользователь вводит вручную; автоматическая оценка не выставляется.

**Опционально:** можно добавить правильные ответы для сравнения. После всех вопросов ставится разделитель `---`, затем строка `Ответы:` (или `ОТВЕТЫ:`), затем пронумерованные ответы по номерам вопросов (`1.` или `1)` и т.д.). После прохождения пользователь видит свой ответ и эталонный; админ может проставить % соответствия.

Пример без ответов:

```text
MODE: Open

Q: Расскажите, что такое инкапсуляция.

Q: Что такое полиморфизм?
```

Пример с ответами:

```text
MODE: Open

Q: Что такое инкапсуляция?

Q: Что такое полиморфизм?

---

Ответы:
1. Инкапсуляция — скрытие внутренней реализации объекта, доступ только через публичный интерфейс.
2. Полиморфизм — возможность объектов с одинаковым интерфейсом иметь разную реализацию.
```

### MODE: Self / SelfStudy (самопроверка)

- Формат как у Open: только строки `Q: <текст вопроса>`, без вариантов.
- Ответы не вводятся и не оцениваются — материал для самостоятельной проверки.

Пример:

```text
MODE: Self

Q: Опишите алгоритм сортировки вставками.

Q: Перечислите основные структуры данных.
```

---

## Правила для ИИ при генерации файлов

1. **Расположение:** создавать файлы только в папке `tests/` или в её подпапках (например `tests/География/Урок 5/`).
2. **Имя файла:** только латиница/кириллица/цифры, расширение `.txt`. Имя без расширения станет названием темы.
3. **Первая непустая строка:** обязательно `MODE: Test`, `MODE: Open`, `MODE: Self` или `MODE: SelfStudy`.
4. **Вопросы:** каждый вопрос начинается с `Q:` (пробел после двоеточия опционален). Текст вопроса — всё до конца строки после `Q:`.
5. **Test:** у каждого вопроса — несколько строк вариантов; ровно один вариант должен начинаться с `*` (правильный). Варианты заканчиваются пустой строкой или следующим `Q:`.
6. **Open / Self:** после `Q: ...` вариантов не добавлять; следующий блок — пустая строка или следующий `Q:`.
7. **Разделители:** между блоками вопросов — минимум одна пустая строка.
8. **Кодировка:** сохранять файл в UTF-8.
9. **Категории:** для структуры «категория → подкатегория → тест» создавать подпапки в `tests/` (например `tests/География/Урок 5/название_теста.txt`).

После добавления или изменения файлов список тем обновляется при заходе на страницу тестов или в админ-панель; новые темы по умолчанию отключены — их нужно включить в админке.
