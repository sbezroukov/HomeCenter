# Формат текста для массового создания тестов

Этот документ описывает формат текста, по которому ИИ (или пользователь) может подготовить блок текста для импорта в QuizApp. Ввод этого текста в форму «Текстовый редактор тестов» с последующим нажатием «Разобрать» покажет предпросмотр: какие папки и файлы будут созданы. После нажатия «Создать» они появятся в папке `tests/`.

---

## Общая структура

Текст состоит из **блоков**, разделённых строкой-разделителем:

```
===
```

Каждый блок задаёт **один файл** теста. В начале блока указывается путь к файлу, затем — содержимое в формате QuizApp (см. `tests/README.md`).

---

## Формат блока

### 1. Первая строка блока: путь к файлу

```
ФАЙЛ: путь/относительно/tests/имя_файла.txt
```

- `ФАЙЛ:` — обязательный маркер (регистр не важен).
- Путь — относительный путь от папки `tests/`. Может включать подпапки.
- Расширение `.txt` обязательно.
- Примеры:
  - `ФАЙЛ: Алгебра/8 класс/Уравнения/Итоговый_тест.txt`
  - `ФАЙЛ: География/Тест_§38.txt`

### 2. Остальное содержимое блока

Сразу после строки `ФАЙЛ:` идёт содержимое файла в формате QuizApp:

- Первая непустая строка: `MODE: Test` | `MODE: Open` | `MODE: Self` (или `SelfStudy`)
- Далее — вопросы в формате `Q: текст вопроса` и варианты (для Test) или просто вопросы (для Open/Self)
- Для MODE: Open с ответами — разделитель `---`, строка `Ответы:` или `ОТВЕТЫ:`, затем пронумерованные ответы (`1.`, `2.` или `1)`, `2)` и т.д.).

Подробности формата — в `tests/README.md`.

---

## Пример полного текста

```text
===
ФАЙЛ: Математика/Алгебра/Базовый_тест.txt
MODE: Test

Q: Сколько будет 2+2?
1) 3
*2) 4
3) 5

Q: Столица России?
1) Киев
2) Минск
*3) Москва

===
ФАЙЛ: Математика/Алгебра/Открытые_вопросы.txt
MODE: Open

Q: Что такое уравнение?

Q: Приведите пример линейного уравнения.

---

Ответы: (или ОТВЕТЫ:)
1. Уравнение — равенство с неизвестной величиной.
2. Например: 2x + 3 = 7.

===
ФАЙЛ: География/Вопросы_перед_чтением.txt
MODE: Self

Q: Какие факторы влияют на климат?

Q: Что такое широта?

===
```

В результате будут созданы:

- `tests/Математика/Алгебра/Базовый_тест.txt`
- `tests/Математика/Алгебра/Открытые_вопросы.txt`
- `tests/География/Вопросы_перед_чтением.txt`

---

## Правила для ИИ при генерации текста

1. **Разделитель блоков:** между блоками — строка `===` (минимум три знака равенства).
2. **Строка ФАЙЛ:** обязательна в начале каждого блока. Формат: `ФАЙЛ: путь/к/файлу.txt`.
3. **Путь:** только латиница, кириллица, цифры, подчёркивания, дефисы. Без пробелов в имени файла (лучше `_`).
4. **MODE:** первая непустая строка после `ФАЙЛ:` — `MODE: Test`, `MODE: Open` или `MODE: Self`.
5. **Вопросы:** каждый вопрос — `Q: текст вопроса`.
6. **Test:** варианты с `*` у правильного. **Open:** при необходимости — секция `---`, строка `Ответы:` или `ОТВЕТЫ:`, затем нумерация (`1.`, `2.` и т.д.).
7. **Кодировка:** UTF-8.
8. **Структура папок:** создавать подпапки по смыслу (предмет → раздел → тест).

---

## Ограничения

- Не перезаписывать существующие файлы без явного указания (в текущей реализации «Создать» добавляет новые файлы; при конфликте имени — поведение зависит от реализации).
- Путь не должен выходить за пределы `tests/` (никаких `../`).
- Имя файла не должно быть пустым.
